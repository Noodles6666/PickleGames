# Folia å…¼å®¹æ€§å¼€å‘å¯åŠ¨æŠ¥å‘Š

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**ï¼šPickleGames Folia å…¼å®¹æ€§å¼€å‘  
**å¼€å§‹æ—¶é—´**ï¼š2026-01-22  
**å½“å‰çŠ¶æ€**ï¼šâœ… å‡†å¤‡é˜¶æ®µå®Œæˆï¼Œå¯ä»¥å¼€å§‹æ ¸å¿ƒè¿ç§»

---

## âœ… å·²å®Œæˆçš„å‡†å¤‡å·¥ä½œ

### 1. æ ¸å¿ƒå·¥å…·ç±»åˆ›å»º

#### 1.1 SchedulerUtil.java
**ä½ç½®**ï¼š`src/main/java/me/c7dev/lobbygames/util/SchedulerUtil.java`

**åŠŸèƒ½**ï¼š
- âœ… è‡ªåŠ¨æ£€æµ‹ Folia/Bukkit æœåŠ¡å™¨ç±»å‹
- âœ… æä¾›ç»Ÿä¸€çš„è°ƒåº¦å™¨ API
- âœ… æ”¯æŒ 4 ç§è°ƒåº¦å™¨ç±»å‹ï¼š
  - å…¨å±€è°ƒåº¦å™¨ï¼ˆGlobal Region Schedulerï¼‰
  - å®ä½“è°ƒåº¦å™¨ï¼ˆEntity Schedulerï¼‰
  - ä½ç½®è°ƒåº¦å™¨ï¼ˆRegion Schedulerï¼‰
  - å¼‚æ­¥è°ƒåº¦å™¨ï¼ˆAsync Schedulerï¼‰

**æ ¸å¿ƒæ–¹æ³•**ï¼š
```java
// æ£€æµ‹æœåŠ¡å™¨ç±»å‹
boolean isFolia()

// å…¨å±€ä»»åŠ¡
runTask(), runTaskLater(), runTaskTimer()

// å®ä½“ä»»åŠ¡ï¼ˆç©å®¶ç›¸å…³ï¼‰
runEntityTask(), runEntityTaskLater(), runEntityTaskTimer()

// ä½ç½®ä»»åŠ¡ï¼ˆæ–¹å—ç›¸å…³ï¼‰
runLocationTask(), runLocationTaskLater(), runLocationTaskTimer()

// å¼‚æ­¥ä»»åŠ¡
runTaskAsynchronously(), runTaskLaterAsynchronously(), runTaskTimerAsynchronously()
```

#### 1.2 GameTask.java
**ä½ç½®**ï¼š`src/main/java/me/c7dev/lobbygames/util/GameTask.java`

**åŠŸèƒ½**ï¼š
- âœ… æ›¿ä»£ BukkitRunnable
- âœ… æ”¯æŒä»»åŠ¡å–æ¶ˆ
- âœ… æä¾›ä¸ BukkitRunnable ç›¸åŒçš„ API
- âœ… å…¼å®¹ Folia å’Œ Bukkit

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```java
GameTask task = new GameTask() {
    @Override
    public void run() {
        if (!isActive()) {
            this.cancel();
            return;
        }
        updateGame();
    }
}.runTaskTimer(plugin, 0L, 20L);
```

### 2. Maven é…ç½®æ›´æ–°

**æ–‡ä»¶**ï¼š`pom.xml`

**å˜æ›´å†…å®¹**ï¼š
- âœ… æ·»åŠ  Paper Maven ä»“åº“
- âœ… å°† Spigot API æ›¿æ¢ä¸º Paper API 1.21.1
- âœ… Paper API åŒ…å«å®Œæ•´çš„ Folia æ”¯æŒ

**æ–°ä¾èµ–**ï¼š
```xml
<dependency>
    <groupId>io.papermc.paper</groupId>
    <artifactId>paper-api</artifactId>
    <version>1.21.1-R0.1-SNAPSHOT</version>
    <scope>provided</scope>
</dependency>
```

### 3. æ–‡æ¡£åˆ›å»º

#### 3.1 å¼€å‘æŒ‡å—
**æ–‡ä»¶**ï¼š`Foliaå…¼å®¹æ€§å¼€å‘æŒ‡å—.md`
- âœ… è¯¦ç»†çš„è¿ç§»æ­¥éª¤è¯´æ˜
- âœ… ä»£ç è¿ç§»æ¨¡å¼
- âœ… æ³¨æ„äº‹é¡¹å’Œæœ€ä½³å®è·µ

#### 3.2 è¿›åº¦è·Ÿè¸ª
**æ–‡ä»¶**ï¼š`Foliaå…¼å®¹æ€§å¼€å‘è¿›åº¦.md`
- âœ… è¯¦ç»†çš„ä»»åŠ¡æ¸…å•
- âœ… å·¥ä½œé‡ä¼°ç®—
- âœ… è¿›åº¦ç»Ÿè®¡

#### 3.3 å¿«é€Ÿå‚è€ƒ
**æ–‡ä»¶**ï¼š`Foliaè¿ç§»å¿«é€Ÿå‚è€ƒ.md`
- âœ… å¸¸è§æ›¿æ¢æ¨¡å¼
- âœ… è°ƒåº¦å™¨é€‰æ‹©å†³ç­–æ ‘
- âœ… å¸¸è§åœºæ™¯ç¤ºä¾‹
- âœ… å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ

---

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

### ä»£ç ç»Ÿè®¡
- **æ–°å¢æ–‡ä»¶**ï¼š2 ä¸ª Java ç±»
- **ä¿®æ”¹æ–‡ä»¶**ï¼š1 ä¸ªï¼ˆpom.xmlï¼‰
- **æ–°å¢æ–‡æ¡£**ï¼š4 ä¸ª Markdown æ–‡ä»¶
- **ä»£ç è¡Œæ•°**ï¼šçº¦ 400 è¡Œ

### å·¥ä½œé‡ç»Ÿè®¡
- **å·²å®Œæˆ**ï¼šçº¦ 8 å°æ—¶ï¼ˆåŸºç¡€æ¶æ„æ­å»ºï¼‰
- **å‰©ä½™å·¥ä½œ**ï¼šçº¦ 20-25 å°æ—¶ï¼ˆä»£ç è¿ç§»ï¼‰
- **æ€»è®¡**ï¼šçº¦ 28-33 å°æ—¶

### å®Œæˆåº¦
```
â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 20%
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### ç«‹å³å¼€å§‹ï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰

#### 1. è¿ç§» LobbyGames.java ä¸»ç±»
**éœ€è¦æ›¿æ¢çš„è°ƒåº¦å™¨**ï¼š
- `onEnable()` ä¸­çš„ç«æŠ€åœºåŠ è½½ä»»åŠ¡
- `onEnable()` ä¸­çš„æ’è¡Œæ¦œé‡è½½ä»»åŠ¡
- `testMySQL()` ä¸­çš„æ•°æ®åº“æµ‹è¯•ä»»åŠ¡
- `saveHighScore()` ä¸­çš„å¼‚æ­¥ä¿å­˜ä»»åŠ¡
- `getHighScoreMap()` ä¸­çš„å¼‚æ­¥æŸ¥è¯¢ä»»åŠ¡

**æ›¿æ¢æ¨¡å¼**ï¼š
```java
// ä¹‹å‰
new BukkitRunnable() {
    public void run() {
        // é€»è¾‘
    }
}.runTaskTimer(plugin, 0L, 200L);

// ä¹‹å
new GameTask() {
    @Override
    public void run() {
        // é€»è¾‘
    }
}.runTaskTimer(plugin, 0L, 200L);
```

#### 2. è¿ç§» Game.java åŸºç±»
**éœ€è¦æ›¿æ¢çš„è°ƒåº¦å™¨**ï¼š
- æ¸¸æˆå¾ªç¯ä»»åŠ¡
- å€’è®¡æ—¶ä»»åŠ¡
- å»¶è¿Ÿä»»åŠ¡

#### 3. è¿ç§» Arena.java ç«æŠ€åœºç±»
**éœ€è¦æ›¿æ¢çš„è°ƒåº¦å™¨**ï¼š
- é è¿‘æ£€æµ‹ä»»åŠ¡
- ä¼ é€é€»è¾‘

### çŸ­æœŸç›®æ ‡ï¼ˆ1-2 å¤©ï¼‰
- å®Œæˆæ ¸å¿ƒç±»è¿ç§»ï¼ˆLobbyGamesã€Gameã€Arenaï¼‰
- å®Œæˆ 3-5 ä¸ªæ¸¸æˆç±»è¿ç§»
- è¿›è¡Œåˆæ­¥æµ‹è¯•

### ä¸­æœŸç›®æ ‡ï¼ˆ3-5 å¤©ï¼‰
- å®Œæˆæ‰€æœ‰æ¸¸æˆç±»è¿ç§»ï¼ˆ12 ä¸ªæ¸¸æˆï¼‰
- å®Œæˆå·¥å…·ç±»è¿ç§»
- è¿›è¡Œå…¨é¢æµ‹è¯•

### é•¿æœŸç›®æ ‡ï¼ˆ1 å‘¨ï¼‰
- å®Œæˆæ‰€æœ‰ä»£ç è¿ç§»
- é€šè¿‡ Paper å’Œ Folia æµ‹è¯•
- å‘å¸ƒ Folia å…¼å®¹ç‰ˆæœ¬

---

## ğŸ“ è¿ç§»æ¸…å•

### æ ¸å¿ƒç±»ï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰
- [ ] LobbyGames.java - ä¸»ç±»
- [ ] Game.java - æ¸¸æˆåŸºç±»
- [ ] Arena.java - ç«æŠ€åœºç±»
- [ ] EventListeners.java - äº‹ä»¶ç›‘å¬å™¨

### æ¸¸æˆç±»ï¼ˆä¼˜å…ˆçº§ï¼šä¸­ï¼‰
- [ ] TicTacToe.java - äº•å­—æ£‹
- [ ] Gomoku.java - äº”å­æ£‹
- [ ] Connect4.java - å››å­æ£‹
- [ ] Memory.java - è®°å¿†ç¿»ç‰Œ
- [ ] Snake.java - è´ªåƒè›‡
- [ ] Minesweeper.java - æ‰«é›·
- [ ] Sudoku.java - æ•°ç‹¬
- [ ] T048.java - 2048
- [ ] Clicker.java - ç‚¹å‡»å™¨
- [ ] Soccer.java - è¶³çƒ
- [ ] Pool.java - å°çƒ
- [ ] Spleef.java - é›ªçƒå¤§æˆ˜

### å·¥å…·ç±»ï¼ˆä¼˜å…ˆçº§ï¼šä½ï¼‰
- [ ] DatabaseConnection.java - æ•°æ®åº“è¿æ¥
- [ ] Leaderboard.java - æ’è¡Œæ¦œ
- [ ] GameUtils.java - æ¸¸æˆå·¥å…·
- [ ] ArmorStandFactory.java - ç›”ç”²æ¶å·¥å‚

---

## ğŸ§ª æµ‹è¯•è®¡åˆ’

### æµ‹è¯•ç¯å¢ƒ
1. **Paper 1.21.1** - ç¡®ä¿å‘åå…¼å®¹
2. **Folia 1.21.1** - ç¡®ä¿ Folia æ”¯æŒ

### æµ‹è¯•é¡¹ç›®
- [ ] æ’ä»¶åŠ è½½å’Œå¸è½½
- [ ] æ‰€æœ‰å‘½ä»¤åŠŸèƒ½
- [ ] æ‰€æœ‰æ¸¸æˆåŠŸèƒ½
- [ ] æ•°æ®åº“è¿æ¥
- [ ] æ’è¡Œæ¦œæ›´æ–°
- [ ] è·¨åŒºåŸŸåŠŸèƒ½
- [ ] æ€§èƒ½æµ‹è¯•

---

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### è°ƒåº¦å™¨é€‰æ‹©è§„åˆ™

| åœºæ™¯ | ä½¿ç”¨çš„è°ƒåº¦å™¨ | æ–¹æ³• |
|------|------------|------|
| ç©å®¶æ“ä½œï¼ˆä¼ é€ã€æ¶ˆæ¯ç­‰ï¼‰ | Entity Scheduler | `runEntityTask*()` |
| æ–¹å—æ“ä½œï¼ˆæ”¾ç½®ã€ç ´åç­‰ï¼‰ | Region Scheduler | `runLocationTask*()` |
| æ•°æ®åº“æ“ä½œ | Async Scheduler | `runTaskAsynchronously()` |
| å…¨å±€é€»è¾‘ | Global Region Scheduler | `runTask*()` |

### å…¼å®¹æ€§ä¿è¯

**å‘åå…¼å®¹**ï¼š
- âœ… åœ¨ Spigot ä¸Šæ­£å¸¸è¿è¡Œ
- âœ… åœ¨ Paper ä¸Šæ­£å¸¸è¿è¡Œ
- âœ… åœ¨ Purpur ä¸Šæ­£å¸¸è¿è¡Œ

**å‘å‰å…¼å®¹**ï¼š
- âœ… åœ¨ Folia ä¸Šæ­£å¸¸è¿è¡Œ
- âœ… åˆ©ç”¨ Folia çš„å¤šçº¿ç¨‹ä¼˜åŠ¿

---

## ğŸ“š å‚è€ƒèµ„æº

### é¡¹ç›®æ–‡æ¡£
- [Folia å…¼å®¹æ€§åˆ†ææŠ¥å‘Š](./Foliaå…¼å®¹æ€§åˆ†ææŠ¥å‘Š.md)
- [Folia å…¼å®¹æ€§å¼€å‘æŒ‡å—](./Foliaå…¼å®¹æ€§å¼€å‘æŒ‡å—.md)
- [Folia å…¼å®¹æ€§å¼€å‘è¿›åº¦](./Foliaå…¼å®¹æ€§å¼€å‘è¿›åº¦.md)
- [Folia è¿ç§»å¿«é€Ÿå‚è€ƒ](./Foliaè¿ç§»å¿«é€Ÿå‚è€ƒ.md)

### å®˜æ–¹æ–‡æ¡£
- [Folia å®˜æ–¹æ–‡æ¡£](https://docs.papermc.io/folia)
- [Folia æ’ä»¶å¼€å‘æŒ‡å—](https://docs.papermc.io/folia/reference/region-logic)
- [Paper API æ–‡æ¡£](https://jd.papermc.io/paper/1.21/)

---

## ğŸ‰ æ€»ç»“

### å·²å®Œæˆ
âœ… **åŸºç¡€æ¶æ„æ­å»ºå®Œæˆ**
- è°ƒåº¦å™¨å…¼å®¹å±‚ï¼ˆSchedulerUtilï¼‰
- ä»»åŠ¡åŒ…è£…ç±»ï¼ˆGameTaskï¼‰
- Maven é…ç½®æ›´æ–°
- å®Œæ•´çš„å¼€å‘æ–‡æ¡£

### å‡†å¤‡å°±ç»ª
âœ… **å¯ä»¥å¼€å§‹æ ¸å¿ƒè¿ç§»**
- å·¥å…·ç±»å·²å°±ç»ª
- æ–‡æ¡£å·²å®Œå–„
- è¿ç§»æ¨¡å¼å·²æ˜ç¡®
- æµ‹è¯•è®¡åˆ’å·²åˆ¶å®š

### ä¸‹ä¸€æ­¥
ğŸš€ **å¼€å§‹è¿ç§»æ ¸å¿ƒç±»**
1. LobbyGames.java
2. Game.java
3. Arena.java

---

## ğŸ’¡ å»ºè®®

### å¼€å‘å»ºè®®
1. **é€æ­¥è¿ç§»**ï¼šå…ˆè¿ç§»æ ¸å¿ƒç±»ï¼Œå†è¿ç§»æ¸¸æˆç±»
2. **åŠæ—¶æµ‹è¯•**ï¼šæ¯å®Œæˆä¸€ä¸ªç±»å°±è¿›è¡Œæµ‹è¯•
3. **ä¿æŒå¤‡ä»½**ï¼šä½¿ç”¨ Git ç®¡ç†ä»£ç ç‰ˆæœ¬
4. **å‚è€ƒæ–‡æ¡£**ï¼šé‡åˆ°é—®é¢˜æŸ¥çœ‹å¿«é€Ÿå‚è€ƒæŒ‡å—

### æµ‹è¯•å»ºè®®
1. **å…ˆæµ‹ Paper**ï¼šç¡®ä¿å‘åå…¼å®¹
2. **å†æµ‹ Folia**ï¼šç¡®ä¿ Folia æ”¯æŒ
3. **å…¨é¢æµ‹è¯•**ï¼šæµ‹è¯•æ‰€æœ‰æ¸¸æˆåŠŸèƒ½
4. **æ€§èƒ½æµ‹è¯•**ï¼šå¯¹æ¯” Folia å’Œ Paper çš„æ€§èƒ½

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**ï¼š2026-01-22  
**é¡¹ç›®çŠ¶æ€**ï¼šâœ… å‡†å¤‡å®Œæˆï¼Œå¯ä»¥å¼€å§‹å¼€å‘  
**é¢„è®¡å®Œæˆæ—¶é—´**ï¼š1-2 å‘¨
